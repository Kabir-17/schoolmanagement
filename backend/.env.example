# ==============================================
# SCHOOL MANAGEMENT SYSTEM - ENVIRONMENT CONFIG
# ==============================================

# ==============================================
# SERVER CONFIGURATION
# ==============================================
NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost:3000

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
MONGODB_URI=mongodb://localhost:27017/school_management
DB_NAME=school_management

# ==============================================
# AUTHENTICATION & SECURITY
# ==============================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=8h

# ==============================================
# SUPERADMIN CREDENTIALS (CHANGE IN PRODUCTION!)
# ==============================================
SUPERADMIN_USERNAME=superadmin
SUPERADMIN_PASSWORD=super123
SUPERADMIN_EMAIL=superadmin@schoolmanagement.com

# ==============================================
# FILE UPLOAD CONFIGURATION
# ==============================================
MAX_FILE_SIZE=5242880
UPLOAD_PATH=../storage
TEMP_UPLOAD_PATH=./temp
MAX_PHOTOS_PER_TEACHER=20

# ==============================================
# RATE LIMITING (Multi-Tenancy Optimized)
# ==============================================
# Note: Rate limiting is now per-school (not per-IP) by default
# This prevents issues with schools behind NAT sharing IP addresses
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Optional: Redis URL for persistent rate limiting across restarts
# REDIS_URL=redis://localhost:6379

# ==============================================
# EMAIL CONFIGURATION (Optional)
# ==============================================
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USER=your-email@gmail.com
# EMAIL_PASS=your-app-password

# ==============================================
# CLOUDINARY CONFIGURATION (Optional)
# ==============================================
# CLOUDINARY_CLOUD_NAME=your-cloud-name
# CLOUDINARY_API_KEY=your-api-key
# CLOUDINARY_API_SECRET=your-api-secret

# ==============================================
# API CONFIGURATION
# ==============================================
API_KEY=school-management-api-key-2025
ALLOWED_ORIGINS=http://localhost:3000

# ==============================================
# ATTENDANCE CONFIGURATION
# ==============================================
ATTENDANCE_LOCK_AFTER_DAYS=7
MAX_PERIODS_PER_DAY=8

# ==============================================
# GOOGLE DRIVE CONFIGURATION (For File Management)
# ==============================================
# GOOGLE_CLIENT_ID=your-client-id
# GOOGLE_CLIENT_SECRET=your-client-secret
# GOOGLE_REFRESH_TOKEN=your-refresh-token
# GOOGLE_DRIVE_FOLDER_ID=your-root-folder-id

# ==============================================
# ACADEMIC CONFIGURATION
# ==============================================
MAX_STUDENTS_PER_SECTION=40
ATTENDANCE_GRACE_PERIOD_MINUTES=15
MAX_ATTENDANCE_EDIT_HOURS=24
ACADEMIC_YEAR_START_MONTH=4
ACADEMIC_YEAR_END_MONTH=3

# ==============================================
# MULTI-TENANCY TIMEZONE CONFIGURATION
# ==============================================
# School timezone for attendance and date handling
# Use IANA timezone format (e.g., 'Africa/Conakry', 'America/New_York', 'UTC')
# This ensures attendance marked at 11 PM appears as current day, not next day
# CRITICAL: Set this to your school's actual timezone for correct date handling
SCHOOL_TIMEZONE=UTC

# Legacy timezone setting (kept for backward compatibility)
DEFAULT_TIMEZONE=Asia/Kolkata

# ==============================================
# MULTI-TENANCY & SCALABILITY NOTES
# ==============================================
# Connection pool is configured for 100+ schools (500 max connections)
# Rate limiting is per-school (not per-IP) to handle schools behind NAT
# School metrics monitoring is enabled for performance tracking
# For production with 100+ schools, consider:
# 1. Enabling Redis for rate limiting (set REDIS_URL above)
# 2. Adding compound indexes (requires DB access - see docs)
# 3. Monitoring slow queries (logged automatically if > 2 seconds)